<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>WorldDynamics tutorial · WorldDynamics.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="WorldDynamics.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">WorldDynamics.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>WorldDynamics tutorial</a><ul class="internal"><li><a class="tocitem" href="#Replicating-book-runs"><span>Replicating book runs</span></a></li><li><a class="tocitem" href="#Performing-sensitivity-tests"><span>Performing sensitivity tests</span></a></li></ul></li><li><a class="tocitem" href="../world2/">World 2 equations, variables, and parameters</a></li><li><a class="tocitem" href="../world3/">World 3 equations, variables, and parameters</a></li><li><a class="tocitem" href="../source/">Source code documentation</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>WorldDynamics tutorial</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>WorldDynamics tutorial</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/worlddynamics/WorldDynamics.jl/blob/main/docs/src/tutorial.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="A-WorldDynamics-tutorial"><a class="docs-heading-anchor" href="#A-WorldDynamics-tutorial">A WorldDynamics tutorial</a><a id="A-WorldDynamics-tutorial-1"></a><a class="docs-heading-anchor-permalink" href="#A-WorldDynamics-tutorial" title="Permalink"></a></h1><p><code>WorldDynamics</code> allows the user to <em>play</em> with the World3 model introduced in the book <em>Dynamics of Growth in a Finite World</em> (1974). Informally speaking, this model is formed by five systems, each containing one or more subsystems. The following picture shows the structure of the model and the connections between the subsystems which share a common variable.</p><p><img src="../img/world3.png" alt="The World3 model"/></p><p>As it can be seen, the five systems are <code>Pop4</code> (which is the population system with four age levels), <code>Agriculture</code>, <code>Capital</code>, <code>Non-renewable</code> (resources), and <code>Pollution</code>. The <code>Pop4</code> system is formed by the three subsystems <code>pop</code> (population), <code>br</code> (birth rate), and <code>dr</code> (death rate). For instance, the subsystem <code>br</code> uses the variable <code>pop</code> which originates from the subsystem <code>pop</code>, while the subsystem <code>pop</code> uses the variable <code>le</code> which originates from the subsystem <code>dr</code>. Of course, there are variables which connect subsystem of different systems. For example, the subsystem <code>pp</code> of the system <code>Pollution</code> uses the variable <code>aiph</code> which originates from the subsystem <code>ai</code> of the system <code>Agriculture</code> (for an entire list of variables and of subsystems using them see the <a href="../world3/#eqs_vars_pars">World 3 equations, variables, and parameters</a> page).</p><p>In <code>WorldDynamics</code> each system is a Julia module and each subsystem corresponds to a Julia function of this module (or of a module which is included in this module), which defines the ODE system corresponding to the subsystem itself. All the ODE systems corresponding to the subsystems of the World3 model have to be composed (see the function <code>compose</code> in the <code>solvesystems.jl</code> code file). This will produce the entire ODE system of the World3 model, which can then be solved by using the function <code>solve</code> in the <code>solvesystems.jl</code> code file.</p><p>Let us now see how we can replicate the runs described in the chapters of the above mentioned book.</p><h2 id="Replicating-book-runs"><a class="docs-heading-anchor" href="#Replicating-book-runs">Replicating book runs</a><a id="Replicating-book-runs-1"></a><a class="docs-heading-anchor-permalink" href="#Replicating-book-runs" title="Permalink"></a></h2><p>For each run described in the seventh chapter of the book, <code>WorldDynamics</code> defines a function which allows the user to reproduce the corresponding figure. For example, in order to replicate Run 7-1, which shows the behavior of important variables in the population system when the world model is run from 1900 to 1970, and which is described in Section 7.2 of the book and depicted in Figure 7-2, we can simply execute the following code.</p><pre><code class="nohighlight hljs">using WorldDynamics
World3.fig_2()</code></pre><p>Instead, in order to replicate Run 7-28, which reaches equilibrium through discrete policy changes, and which is described in Section 7.7 of the book depicted in Figure 7-38, we can execute the following code.</p><pre><code class="nohighlight hljs">using WorldDynamics
World3.fig_38()</code></pre><p>We can also replicate the runs of the other chapters of the book (each one devoted to one system of the model). For example, in order to replicate the standard run of the capital system, which is described in Section 3.7 of the book and depicted in Figure 3-36, we can  execute the following code.</p><pre><code class="nohighlight hljs">using WorldDynamics
World3.Capital.fig_36()</code></pre><h2 id="Performing-sensitivity-tests"><a class="docs-heading-anchor" href="#Performing-sensitivity-tests">Performing sensitivity tests</a><a id="Performing-sensitivity-tests-1"></a><a class="docs-heading-anchor-permalink" href="#Performing-sensitivity-tests" title="Permalink"></a></h2><p>In order to perform sensitivity tests, we have first to modify the parameter or the interpolation table of the variable with respect to which we want to perform the sensitivity test, then to create the ODE system corresponding to the historical run with the modification integrated in the system, and finally to solve the ODE system. We can then plot the resulting evolution of the model.</p><h3 id="Modifying-a-parameter-of-the-variable"><a class="docs-heading-anchor" href="#Modifying-a-parameter-of-the-variable">Modifying a parameter of the variable</a><a id="Modifying-a-parameter-of-the-variable-1"></a><a class="docs-heading-anchor-permalink" href="#Modifying-a-parameter-of-the-variable" title="Permalink"></a></h3><p>In order to reproduce Figure 7-10, for example, in which the nonrenewable resources initial value (that is, the value of the <code>NRI</code> parameter) is doubled, we can modify the value of this parameter by getting the parameter set of the nonrenewable resources sector, and by changing the value of <code>NRI</code>, as shown in the following code.</p><pre><code class="nohighlight hljs">using WorldDynamics

nonrenewable_parameters_7_10 = World3.NonRenewable.getparameters();
nonrenewable_parameters_7_10[:nri] = 2.0 * nonrenewable_parameters_7_10[:nri];</code></pre><h4 id="Creating-the-ODE-system"><a class="docs-heading-anchor" href="#Creating-the-ODE-system">Creating the ODE system</a><a id="Creating-the-ODE-system-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-the-ODE-system" title="Permalink"></a></h4><p>The ODE system is then created by executing the following code, in which we specify which set of parameter values has to be used for the nonrenewable resources sector.</p><pre><code class="nohighlight hljs">system = World3.historicalrun(nonrenewable_params=nonrenewable_parameters_7_10);</code></pre><h4 id="Solving-the-ODE-system"><a class="docs-heading-anchor" href="#Solving-the-ODE-system">Solving the ODE system</a><a id="Solving-the-ODE-system-1"></a><a class="docs-heading-anchor-permalink" href="#Solving-the-ODE-system" title="Permalink"></a></h4><p>We then have to solve the ODE system, by executing the following code.</p><pre><code class="nohighlight hljs">sol = WorldDynamics.solve(system, (1900, 2100));</code></pre><h4 id="Plotting-the-evolution-of-the-model"><a class="docs-heading-anchor" href="#Plotting-the-evolution-of-the-model">Plotting the evolution of the model</a><a id="Plotting-the-evolution-of-the-model-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting-the-evolution-of-the-model" title="Permalink"></a></h4><p>We first have to define the variables that we want to plot. For example, Figure 7-10 of the book shows the plot of seven variables of seven different subsystems of the model. In order to easily access to these variables, we first create shortcuts to the subsystems in which they are introduced.</p><pre><code class="nohighlight hljs">using ModelingToolkit

@named pop = World3.Pop4.population();
@named br = World3.Pop4.birth_rate();
@named dr = World3.Pop4.death_rate();
@named is = World3.Capital.industrial_subsector();
@named ld = World3.Agriculture.land_development();
@named nr = World3.NonRenewable.non_renewable();
@named pp = World3.Pollution.persistent_pollution();</code></pre><p>The seven variables are then defined as follows.</p><pre><code class="nohighlight hljs">reference_variables = [
    (nr.nrfr, 0, 1, &quot;nrfr&quot;),
    (is.iopc, 0, 1000, &quot;iopc&quot;),
    (ld.fpc, 0, 1000, &quot;fpc&quot;),
    (pop.pop, 0, 16e9, &quot;pop&quot;),
    (pp.ppolx, 0, 32, &quot;ppolx&quot;),
    (br.cbr, 0, 50, &quot;cbr&quot;),
    (dr.cdr, 0, 50, &quot;cdr&quot;),
];
@variables t;</code></pre><p>For each variable that we want to plot, the above vector includes a quadruple, containing the Julia variable, its range, and its symbolic name to be shown in the plot (the range and the symbolic name are optional). The time variable <code>t</code> has also to be declared.</p><p>Finally, we can plot the evolution of the variables according to the previously computed solution.</p><pre><code class="nohighlight hljs">plotvariables(sol, (t, 1900, 2100), reference_variables, title=&quot;Fig. 7-10&quot;, showlegend=true, colored=true)</code></pre><h3 id="Modifying-an-interpolation-table"><a class="docs-heading-anchor" href="#Modifying-an-interpolation-table">Modifying an interpolation table</a><a id="Modifying-an-interpolation-table-1"></a><a class="docs-heading-anchor-permalink" href="#Modifying-an-interpolation-table" title="Permalink"></a></h3><p>In order to reproduce Figure 7-13, in which the slope of the fraction of industrial output allocated to agriculture is increased, we can modify the two tables <code>FIOAA1</code> and <code>FIOAA2</code> by getting the table set of the agriculture sector, and by changing the value of these two tables. We then have to solve the ODE system again, by specifying which set of tables has to be used for the agriculture sector. Finally, we can plot the same seven variables of Figure 7-10. This is exactly what we do in the following code.</p><pre><code class="nohighlight hljs">using WorldDynamics

agriculture_tables_7_13 = World3.Agriculture.gettables();
agriculture_tables_7_13[:fioaa1] = (0.5, 0.3, 0.1, 0.0, 0.0, 0.0);
agriculture_tables_7_13[:fioaa2] = (0.5, 0.3, 0.1, 0.0, 0.0, 0.0);
system = World3.historicalrun(agriculture_tables=agriculture_tables_7_13);
sol = WorldDynamics.solve(system, (1900, 2100));
plotvariables(sol, (t, 1900, 2100), reference_variables, title=&quot;Fig. 7-13&quot;, showlegend=true, colored=true)</code></pre><h3 id="Updating-the-model-with-modern-data"><a class="docs-heading-anchor" href="#Updating-the-model-with-modern-data">Updating the model with modern data</a><a id="Updating-the-model-with-modern-data-1"></a><a class="docs-heading-anchor-permalink" href="#Updating-the-model-with-modern-data" title="Permalink"></a></h3><p>The flexible structure of <code>WorldDynamics</code> allows the user to feed the model with modern data. For example, in the book, the variable <code>POP</code> of the pollution system is assigned the following interpolation table which corresponds to the population number (expressed in <span>$10^8$</span>) for a set of years between 1900 and 2100.</p><pre><code class="nohighlight hljs">tables[:pop] = (16.0, 19.0, 22.0, 31.0, 42.0, 53.0, 67.0, 86.0, 109.0, 139.0, 176.0);
ranges[:pop] = (1900, 2100)</code></pre><p>Instead, we can extend the above set of years to a much larger one as well as replace any outdated estimations with more recent data available at open-source data catalogs. In the following, we consider past and future projections of the world population, taken from the recognized public database <a href="https://ourworldindata.org/grapher/population-past-future?time=1867..2100">Our World In Data</a>. We first have to modify the table <code>POP</code> by getting the table set of the pollution sector, and by changing its value. We then have to solve the ODE system again, by specifying which set of tables has to be used for the pollution sector. This is exactly what we do in the following code.</p><pre><code class="nohighlight hljs">using WorldDynamics

tables = Pollution.gettables();
tables[:pop] = (16.47,16.59,16.73,16.87,17.02,17.16,17.31,17.47,17.62,17.77,17.93,18.05,18.18,18.30,18.43,18.56,18.69,18.82,18.95,19.09,19.26,19.40,19.56,19.73,19.90,20.08,20.26,20.44,20.63,20.82,21.04,21.22,21.44,21.66,21.88,22.10,22.33,22.57,22.80,23.03,23.27,23.45,23.64,23.82,24.00,24.17,24.35,24.54,24.75,25.01,24.99,25.43,25.90,26.40,26.92,27.46,28.01,28.58,29.16,29.70,30.19,30.68,31.27,31.96,32.67,33.37,34.06,34.75,35.47,36.21,36.95,37.70,38.45,39.20,39.96,40.69,41.43,42.16,42.90,43.66,44.44,45.25,46.08,46.92,47.76,48.62,49.50,50.41,51.32,52.24,53.16,54.06,54.93,55.77,56.61,57.43,58.25,59.06,59.87,60.68,61.49,62.31,63.12,63.94,64.76,65.58,66.41,67.26,68.12,68.98,69.86,70.73,71.62,72.51,73.39,74.27,75.13,76.00,76.84,77.65,78.41,79.09,79.75,80.45,81.19,81.92,82.64,83.36,84.07,84.77,85.46,86.15,86.82,87.49,88.15,88.79,89.43,90.06,90.68,91.29,91.88,92.47,93.04,93.60,94.14,94.68,95.19,95.69,96.18,96.65,97.09,97.53,97.94,98.34,98.72,99.08,99.43,99.76,100.08,100.39,100.68,100.96,101.22,101.48,101.73,101.96,102.18,102.40,102.60,102.79,102.97,103.14,103.30,103.45,103.59,103.71,103.82,103.92,104.01,104.08,104.15,104.20,104.24,104.27,104.29,104.31,104.31,104.30,104.29,104.27,104.24,104.20,104.15,104.09,104.03,103.96,103.89,103.80,103.70,103.60,103.49);

system = World3.Pollution.historicalrun(tables=tables);
sol = WorldDynamics.solve(system, (1900, 2100))</code></pre><p>Finally, we can compare the model updated with new data against the one with outdated data by reproducing the figures from the book (as described within the <a href="#Replicating-book-runs">Replicating book runs</a> section).</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../world2/">World 2 equations, variables, and parameters »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Saturday 19 November 2022 11:21">Saturday 19 November 2022</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
